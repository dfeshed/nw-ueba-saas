# Flume agent for the adapter component
# The source reads data from Netwitness SDK within a given time range
# Date format: yyyy-mm-ddTHH:mm:ss 2015-01-01T00:00:01Z
# Channel stores in file up to 10K records
# The sinks writes the records using the input SDK
###################################### AGENT #####################################################
nwAuthenticationAgent.sources=sdkSource
nwAuthenticationAgent.channels=memoryChannel
nwAuthenticationAgent.sinks=inputSdkSink
###################################### SOURCE #####################################################
nwAuthenticationAgent.sources.sdkSource.channels=memoryChannel
nwAuthenticationAgent.sources.sdkSource.streamImplClassName=presidio.nw.flume.sdk.NetwitnessEventsStream
nwAuthenticationAgent.sources.sdkSource.type=org.flume.source.sdk.PresidioStreamingSDKSource
nwAuthenticationAgent.sources.sdkSource.schema=AUTHENTICATION
nwAuthenticationAgent.sources.sdkSource.startDate=$startDate
nwAuthenticationAgent.sources.sdkSource.endDate=$endDate
nwAuthenticationAgent.sources.sdkSource.query=select *
nwAuthenticationAgent.sources.sdkSource.timeField=time
nwAuthenticationAgent.sources.sdkSource.batchSize=1000
nwAuthenticationAgent.sources.sdkSource.isBatch=true
nwAuthenticationAgent.sources.sdkSource.applicationName=adapter
### FIELD RENAMER INTERCEPTOR ###
nwAuthenticationAgent.sources.sdkSource.interceptors = fieldArrayToSingleInterceptor fieldRenameInterceptor
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldArrayToSingleInterceptor.type = org.apache.flume.interceptor.presidio.JsonArrayToElementInterceptor$Builder
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldArrayToSingleInterceptor.originField=alias_host
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldArrayToSingleInterceptor.destinationField=host
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldArrayToSingleInterceptor.index=0
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldRenameInterceptor.type = org.apache.flume.interceptor.presidio.JsonFieldRenamerInterceptor$Builder
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldRenameInterceptor.originFieldsList=event_source_id,event_source,user_dst,user_dst,user_dst,host,host,event_type,event_time
nwAuthenticationAgent.sources.sdkSource.interceptors.fieldRenameInterceptor.destinationFieldsList=eventId,dataSource,userId,userName,userDisplayName,srcMachineName,srcMachineId,operationType,dateTime
###################################### CHANNEL #####################################################
nwAuthenticationAgent.channels.memoryChannel.type=memory
nwAuthenticationAgent.channels.memoryChannel.capacity=100000
nwAuthenticationAgent.channels.memoryChannel.transactionCapacity=10000
###################################### SINK #####################################################
nwAuthenticationAgent.sinks.inputSdkSink.channel=memoryChannel
nwAuthenticationAgent.sinks.inputSdkSink.type=org.flume.sink.input.PresidioInputSdkSink
nwAuthenticationAgent.sinks.inputSdkSink.schema=AUTHENTICATION
nwAuthenticationAgent.sinks.inputSdkSink.recordType=presidio.sdk.api.domain.rawevents.AuthenticationRawEvent
nwAuthenticationAgent.sinks.inputSdkSink.isBatch=true
nwAuthenticationAgent.sinks.inputSdkSink.batchSize=1000
nwAuthenticationAgent.sinks.inputSdkSink.applicationName=adapter
