<hbox class="rsa-investigate-events-table__header">
  <h2>
    {{t "investigate.events.title"}}
    {{#if totalCount}}
      <span class="rsa-investigate-events-table__sums">
        {{event-counter
          class="rsa-investigate-events-table__sums-total"
          count=totalCount
          status=totalStatus
          threshold=totalThreshold
          retryAction=totalRetryAction}}
      </span>
    {{/if}}
  </h2>
  <div class="events-table-control">
    {{rsa-icon
      disabled=(not isOpen)
      click=(route-action 'toggleReconSize')
      name=toggleEventsClass
      title=(t toggleEventsTitle)}}
    {{rsa-icon
      disabled=(not isOpen)
      click=(route-action 'toggleSlaveFullScreen')
      name='close'
      title=(t 'investigate.events.close')}}
  </div>
</hbox>

<section class="rsa-investigate-events-table__body">
  {{progress-bar
    percent=percent
    enabled=(is-equal status 'streaming')
  }}
  {{#events-table-context-menu contextItems=(build-context-menu)}}
    {{#rsa-data-table
      keyboardActivated=true
      lazy=true
      fitToWidth=true
      items=items
      selectedIndex=selectedIndex
      columnsConfig=columnsConfig
      language=language
      aliases=aliases
      onRowClick=rowClickAction
      loadLogsAction=loadLogsAction
      scrollToInitialSelectedIndex=true
    }}
      {{#rsa-data-table/header as |column|}}
        {{#with (meta-key-alias column.field language) as |names|}}
          <h2 class="title" title="{{if column.title column.title names.bothNames}}">
            <span class="js-move-handle">{{if column.title column.title names.displayName}}</span>
          </h2>
        {{/with}}
      {{/rsa-data-table/header}}
      {{events-table-body buffer=5 rowComponentClass="events-table-row" showNoResultMessage=false}}
      {{rsa-data-table/load-more status=status clickAction=loadMoreAction}}
    {{/rsa-data-table}}
  {{/events-table-context-menu}}
  {{#if _isStatusError}}
    {{#rsa-panel-message title=(t 'investigate.error.title') message=(t 'investigate.error.description')}}
      {{#rsa-form-button}}<span {{action 'loadMoreAction'}}>{{t 'investigate.tryAgain'}}</span>{{/rsa-form-button}}
    {{/rsa-panel-message}}
  {{else if (is-equal totalCount 0)}}
    {{rsa-panel-message title=(t 'investigate.empty.title') message=(t 'investigate.empty.description')}}
  {{/if}}
</section>
