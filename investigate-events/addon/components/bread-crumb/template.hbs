<section class="rsa-investigate-breadcrumb__crumbs rsa-button-group">
  {{#if serviceObject}}
    {{#rsa-content-tethered-panel-trigger
      triggerEvent='click'
      panel=(concat 'breadCrumbServiceTooltip-' elementId)
    }}
      {{#rsa-form-button
        class='rsa-investigate-breadcrumb__crumb'
        allowToggleActive=true
        title=serviceObject.displayName
        withDropdown=true
      }}
        {{rsa-icon style='lined' name='server-3'}}
        <span class='js-test-service'>{{serviceObject.displayName}}</span>
      {{/rsa-form-button}}
    {{/rsa-content-tethered-panel-trigger}}
    {{#rsa-content-tethered-panel
      displayCloseButton=false
      isPopover=true
      position='bottom-right'
      panelId=(concat 'breadCrumbServiceTooltip-' elementId)
      as |hideTooltip|
    }}
      <ul class="rsa-dropdown-link-list" {{action hideTooltip}}>
        {{#each servicesWithURI as |service|}}
          <li>
            {{!--
                Why the undefined eventId? Ember is trying to be helpful by
                caching our query params. In this case however, it's not useful
                because could point to an event that a service does not know
                about. So we force it to undefined.
            --}}
            {{#link-to 'query' service.queryURI (query-params eventId="undefined")}}
              {{service.displayName}}
            {{/link-to}}
          </li>
        {{/each}}
      </ul>
    {{/rsa-content-tethered-panel}}
  {{/if}}

  {{#rsa-content-tethered-panel-trigger
    triggerEvent='click'
    panel=(concat 'breadCrumbTimeTooltip-' elementId)
  }}
    {{#rsa-form-button
      allowToggleActive=true
      withDropdown=true
      class="rsa-investigate-breadcrumb__crumb"
    }}
      {{rsa-icon style='lined' name='clock-2'}}
      {{bread-crumb/time-range startTime=startTime endTime=endTime}}
    {{/rsa-form-button}}
  {{/rsa-content-tethered-panel-trigger}}
  {{#rsa-content-tethered-panel
    isPopover=false
    displayCloseButton=false
    position='bottom'
    panelId=(concat 'breadCrumbTimeTooltip-' elementId)
    as |hideTooltip|
  }}
    <ul class="rsa-dropdown-link-list" {{action hideTooltip}}>
      {{#if hasDrill}}
        <li>
          {{#link-to 'query' baseUri class='goto'}}
            Navigate Here
          {{/link-to}}
        </li>
      {{/if}}
      <li>
        {{#rsa-link-to-win 'query' baseUri class='goto' target='_blank'}}
          Navigate Here (New Tab)
        {{/rsa-link-to-win}}
      </li>
    </ul>
  {{/rsa-content-tethered-panel}}

  {{query-filters executeQuery=(route-action 'executeQuery')}}
</section>
