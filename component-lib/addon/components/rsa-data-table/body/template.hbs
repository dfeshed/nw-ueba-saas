{{!render a container as tall as all the items, to ensure the scrollbar's range can reach all items even with lazy rendering}}
{{#rsa-data-table/body-rows minHeight=_minScrollHeight}}

  {{!always render the very first item (if any) so that it can be measured}}
  {{#if items.length}}
    {{#component rowComponentClass
      isSizeSample=true
      item=items.firstObject
      height=_rowHeight
      relativeIndex=0
      relativeIndexOffset=0
      clickAction=(action "rowClick" target=table)
      as |firstRowItem firstRowIndex column|}}
      {{#with (get items.firstObject selectedItemKey) as |itemKey|}}
        {{#if (and insertCheckbox itemKey (gte selectedItems.length 0))}}

          <div class="checkbox-wrapper">
            <label class="rsa-form-checkbox-label {{if (or allItemsSelected (contains itemKey selectedItems)) 'checked'}}">
              {{rsa-form-checkbox
                checked=(or allItemsSelected (contains itemKey selectedItems))
                change=(action checkboxChange items.firstObject)
              }}
            </label>
          </div>
        {{/if}}
      {{/with}}
      {{yield firstRowItem firstRowIndex column}}
    {{/component}}
  {{else}}
    {{rsa-data-table/empty-table-header-row}}
  {{/if}}

  {{!also render each of the items that fit within the current viewport}}
  {{#each _visibleItems as |item index|}}

    {{#component rowComponentClass
      item=item
      height=_rowHeight
      relativeIndex=index
      relativeIndexOffset=_firstBufferedIndex
      clickAction=(action "rowClick" target=table)
      as |rowItem rowIndex column|}}

      {{#if (and insertCheckbox (get item selectedItemKey) (gte selectedItems.length 0))}}
        <div class="checkbox-wrapper">
          <label class="rsa-form-checkbox-label {{if (or allItemsSelected (contains (get item selectedItemKey) selectedItems)) 'checked'}}">
            {{rsa-form-checkbox
              checked=(or allItemsSelected (contains (get item selectedItemKey) selectedItems))
              change=(action checkboxChange item)
            }}
          </label>
        </div>
      {{/if}}

      {{yield rowItem rowIndex column}}
    {{/component}}

  {{/each}}

{{/rsa-data-table/body-rows}}
{{#if shouldShowNoResultMessage}}
  {{!The error must be outside of the body rows - so that the message can show in the center/middle of the panel}}
  {{#if hasZeroResults}}
    {{rsa-panel-message message=_noResultsMessage messageType='no-results-message'}}
  {{/if}}
{{/if}}
