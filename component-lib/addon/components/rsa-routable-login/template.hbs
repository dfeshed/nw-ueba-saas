<!-- template-lint triple-curlies=false -->
{{#unless session.isAuthenticated}}
  <div class="login-wrapper {{if hasError 'has-error'}}">
    <header>
      {{rsa-logo title=(t 'application.title')}}

      {{#if displayEula}}
        <h3>{{t 'login.eula.title'}}</h3>
      {{/if}}
    </header>

    {{#if displayEula}}
      <form class="eula" {{action "acceptEula" on="submit"}}>
        <div class="eula-content">
          {{{eulaContent}}}
        </div>

        {{#rsa-form-button
          type="submit"
          style="primary"
          isFullWidth=true}}
          {{t 'login.eula.title'}}
        {{/rsa-form-button}}
      </form>
    {{else if mustChangePassword}}
      <form class="change-password" {{action "changePassword" on="submit"}}>
        <p>
          {{t 'login.forcePassword.warning'}}
        </p>

        {{rsa-form-input
          class="js-test-login-old-password-input"
          type="password"
          label=(t 'login.oldPassword')
          isError=hasError
          value=password}}

        {{rsa-form-input
          class="js-test-login-new-password-input"
          type="password"
          label=(t 'login.newPassword')
          isError=hasError
          value=newPassword}}

        {{rsa-form-input
          class="js-test-login-confirm-new-password-input"
          type="password"
          label=(t 'login.confirmPassword')
          isError=hasError
          value=newPasswordConfirm}}

        {{#if errorMessage}}
          <div class="form-error-message">
            {{t errorMessage}}
          </div>
        {{/if}}

        {{#rsa-form-button
          type="submit"
          style="primary"
          isFullWidth=true
          isDisabled=changePasswordDisabled}}
          {{t 'login.forcePassword.changePassword'}}
        {{/rsa-form-button}}
      </form>
    {{else}}
      <form class="login" autocomplete="off" {{action "authenticate" on="submit"}}>
        {{rsa-form-input
          class="js-test-login-username-input"
          label=(t 'login.username')
          isError=hasError
          value=username}}

        {{rsa-form-input
          class="js-test-login-password-input"
          type="password"
          label=(t 'login.password')
          isError=hasError
          value=password}}

        {{#if errorMessage}}
          <div class="form-error-message">
            {{t errorMessage}}
          </div>
        {{/if}}

        {{#rsa-form-button
          type="submit"
          class="js-test-login-submit-button"
          isDisabled=isLoginDisabled
          isFullWidth=true
          style="primary"}}
          {{#if isAuthenticating}}
            {{t 'login.loggingIn'}}
          {{else}}
            {{t "login.login"}}
          {{/if}}
        {{/rsa-form-button}}

        <span class="version">{{version}}</span>
      </form>
    {{/if}}
  </div>
{{else}}
  {{rsa-loader size="largest"}}
{{/unless}}
