<div class="server-input-group">
  <div class="field">
    <hbox xs="12">
      <div class="col-xs-5 host-ip-js">
        {{rsa-form-input label=(t 'packager.server') value=configData.packageConfig.server}}
      </div>
      <div class="col-xs-4 host-port-js">
        {{rsa-form-input label=(t 'packager.port') value=configData.packageConfig.port}}
      </div>
    </hbox>
  </div>
</div>
<div class="field rsa-form-radio-group">
  <h4 class='rsa-form-radio-group-label'>{{t 'packager.certificateValidation'}}</h4>
  <label class="rsa-form-radio-label {{if (eq 'none' configData.packageConfig.certificateValidation) 'checked'}}">
    {{radio-button
      value='none'
      groupValue=configData.packageConfig.certificateValidation}}
    {{t 'packager.none'}}
  </label>
  <label class="rsa-form-radio-label {{if (eq 'fullchain' configData.packageConfig.certificateValidation) 'checked'}}">
    {{radio-button
      value='fullchain'
      groupValue=configData.packageConfig.certificateValidation}}
    {{t 'packager.fullChain'}}
  </label>
  <label class="rsa-form-radio-label {{if (eq 'thumbprint' configData.packageConfig.certificateValidation) 'checked'}}">
    {{radio-button
      value='thumbprint'
      groupValue=configData.packageConfig.certificateValidation}}
    {{t 'packager.thumbprint'}}
  </label>
</div>
<div class="server-input-group">
  <div class="field">
    <hbox xs="12">
      <div class="col-xs-5">
        {{rsa-form-input type="password" label=(t 'packager.certificatePassword') value=configData.packageConfig.certificatePassword}}
      </div>
    </hbox>
  </div>
</div>
<div class="field col-xs-5">
  {{rsa-form-datetime
    label=(t 'packager.autoUninstall')
    showTime=true
    timeLabel=(t 'Time')
    incrementMinuteBy=5
    width=100
    minDate=minDate
    value=(readonly configData.packageConfig.autoUninstall)
    yearRange="currentYear, 2050"
    onChange=(action (mut configData.packageConfig.autoUninstall))
  }}
</div>
<div class="field force-overwrite">
  {{#x-toggle
    showLabels=true
    onLabel=(t 'packager.forceOverwrite')
    value=(readonly configData.packageConfig.forceOverwrite)
    onToggle=(action (mut configData.packageConfig.forceOverwrite)) as |toggle|}}
    {{toggle.switch}}
    {{toggle.onLabel value=(not configData.packageConfig.forceOverwrite)}}
  {{/x-toggle}}
</div>
<div class="server-input-group">
  <div class="field">
    <hbox xs="12">
      <div class="col-xs-5 service-name-js">
        {{rsa-form-input label=(t 'packager.serviceName') value=configData.packageConfig.serviceName}}
      </div>
      <div class="col-xs-5 display-name-js">
        {{rsa-form-input label=(t 'packager.displayName') value=configData.packageConfig.displayName}}
      </div>
    </hbox>
  </div>
</div>
<div class="field">
  <div class="col-xs-10">
    {{rsa-form-input label=(t 'packager.description') value=configData.packageConfig.description}}
  </div>
</div>
<div class="windows-log-collection">
  {{#rsa-content-accordion label=(t 'packager.windowsLogCollectionCongfig')}}
    <div class="field">
      <label class="rsa-form-checkbox-label {{if isLogCollectionEnabled 'checked'}}" >
        {{rsa-form-checkbox
          checked=isLogCollectionEnabled
          change=(action 'enableLogCollection')}}
        {{t 'packager.enableWindowsLogCollection'}}
      </label>
    </div>
    {{#if isLogCollectionEnabled}}

      <div class="load-error-message">
        <ul class="rsa-flash-messages">
          {{#each flashMessages.queue as |flash|}}
            {{#flash-message tagName="li" flash=flash as |component flash|}}
              <hbox align="stretch">
                <centered xs="2">
                  {{rsa-icon name=flash.iconName style=flash.iconStyle size=flash.iconSize}}
                </centered>
                <vbox xs="9" justify="center" class="message">
                  {{flash.message}}
                </vbox>
                <vbox xs="1" justify="start" align="center">
                  {{rsa-icon name="close"}}
                </vbox>
              </hbox>
            {{/flash-message}}
          {{/each}}
        </ul>
      </div>

      <hbox xs="12">
        <div class="col-xs-5 field">
          {{rsa-form-input label=(t 'packager.configurationName') value=configData.logCollectionConfig.configName isError=isError errorMessage=errorMessage}}
        </div>
        <div class="col-xs-6 field fileContainer">
          <label for="file-upload" class="custom-file-upload">
            {{t 'packager.loadExistingLogConfig'}}
          </label>
          <input id="file-upload" type='file' onchange={{action 'uploadConfig'}} accept='.nwelcfg' value='C:\Fakepath'>
        </div>
      </hbox>

      <div class="col-xs-12 field">
        <label class={{className}}>
          <div class="label-text">
            {{t 'packager.primaryLogDecoder'}}
          </div>

          {{#power-select
            placeholder=(t 'packager.placeholder')
            options=listOfService
            triggerClass=errorClass
            dropdownClass=errorClass
            searchPlaceholder=(t 'packager.searchPlaceholder')
            selected=selectedPrimaryDestination
            onchange=(action 'setPrimaryDestination' value="id") as |list|}}
            {{list.value}}
          {{/power-select}}

        </label>
      </div>

      <div class="col-xs-12 field">
        <label class="rsa-form-label power-select">
          <div class="label-text">
            {{t 'packager.secondaryLogDecoder'}}
          </div>
          {{#power-select
            placeholder=(t 'packager.placeholder')
            options=listOfSecondaryService
            searchPlaceholder=(t 'packager.searchPlaceholder')
            selected=selectedSecondaryDestination
            onchange=(action 'setSecondaryDestination' value="id") as |list|}}
            {{list.value}}
          {{/power-select}}
        </label>
      </div>

      <div class="col-xs-12 field">
        {{rsa-form-input label=(t 'packager.channels') value=configData.logCollectionConfig.channels}}
      </div>

      <div class="col-xs-5 field protocol-js">
        <label class={{protocolClassName}}>
          <div class="label-text">
            {{t 'packager.protocol'}}
          </div>

          {{#power-select
            placeholder=(t 'packager.placeholder')
            options=protocolOptions
            selected=selectedProtocol
            triggerClass=protocolErrorClass
            dropdownClass=protocolErrorClass
            searchPlaceholder=(t 'packager.searchPlaceholder')
            onchange=(action 'setSelect' 'protocol' 'selectedProtocol') as |option|}}
            {{option}}
          {{/power-select}}
        </label>
      </div>

      <div class="field">
        <label class="rsa-form-checkbox-label {{if configData.logCollectionConfig.testLogOnLoad 'checked'}}">
          {{rsa-form-checkbox
            checked=configData.logCollectionConfig.testLogOnLoad
            change=(action 'toggleProperty' "configData.logCollectionConfig.testLogOnLoad")}}
          {{t 'packager.testLog'}}
        </label>
      </div>
    {{/if}}
  {{/rsa-content-accordion}}
</div>

<div class="field buttons">
  <hbox class="rsa-button-group">
    {{#rsa-form-button isDisabled=isResetDisabled defaultAction=(action 'resetForm')}}
      {{t 'packager.reset'}}
    {{/rsa-form-button}}
    {{#rsa-form-button style='primary' class="generateButton-js" isDisabled=isDisabled defaultAction=(action 'generateAgent')}}
      {{t 'packager.generateAgent'}}
    {{/rsa-form-button}}
    {{#rsa-form-button isDisabled=isGenerateLogDisabled defaultAction=(action 'generateLogConfig')}}
      {{t 'packager.generateLogConfig'}}
    {{/rsa-form-button}}
  </hbox>
</div>
