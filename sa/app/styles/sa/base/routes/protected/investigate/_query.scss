@mixin recon-sizing($reconWidth) {
  .rsa-investigate-query__body {
    &-master {
      right: $reconWidth;
      background-color: rsa-color(black,base,$rsa-nearly-transparent);
    }
    &-slave {
      width: $reconWidth;
    }
  }
}

.rsa-investigate-query {
  position: relative;
  @include rsa-vendor-prefix(flex-grow, 1);
  @include rsa-col(justify,fill);

  &__header {
    background-color: rsa-color(black,base,$rsa-translucent);
    @include rsa-vendor-prefix(flex-shrink, 1);
    margin: 1px 0;
    padding: rsa-whitespace(less) rsa-whitespace();
  }

  &__body {
    position: relative;   /* enables positioning of children */
    @include rsa-vendor-prefix(flex-grow, 1);

    &-status {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 3;
      @include rsa-col(center, middle);
      text-align: center;
    }
    &-master {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      transition-property: background-color right;
      transition-duration: 0.3s;
      @include rsa-row(justify,fill);
    }
    &-slave {
      position: absolute;
      top: 0;
      bottom: 0;
      right: 0;
      width: 0;
      transition: width .3s;
      overflow: hidden;
    }

    &.recon-is-open {
      @include recon-sizing($investigateReconWidth)
    }

    &.recon-is-expanded {
      @include recon-sizing($investigateReconExpandedWidth)
    }

    &-master-aside,
    &-master-main {
      transition: all 0.3s;
      overflow-x: hidden;
      position: relative;
    }
    &-master-main {
      @include rsa-vendor-prefix(flex-grow,1);
      background-color: rsa-color(black,base,$rsa-nearly-transparent);
    }
    &-master-aside {
      @include rsa-vendor-prefix(flex-shrink,0);
      @include rsa-vendor-prefix(flex-basis,25%);
      min-width: 40px;
    }

    /* meta vs events: default arrangement */
    &.meta-panel-size-default {
      .rsa-investigate-query__body {
        &-master-aside:hover,
        &-master-main:hover {
          z-index: 2;
        }
      }
    }

    /* meta vs events: meta minimized */
    &.meta-panel-size-min {
      .rsa-investigate-query__body {
        &-master-aside {
          @include rsa-vendor-prefix(flex-basis,0);
          background-color: rsa-color(black,base,$rsa-nearly-transparent);
          z-index: 1;
        }
        &-master-main {
          z-index: 2;
        }
      }
    }

    /* meta vs events: meta minimized */
    &.meta-panel-size-max {
      .rsa-investigate-query__body {
        &-master-aside {
          @include rsa-vendor-prefix(flex-basis,100%);
          z-index: 2;
        }
        &-master-main {
          display: none;
        }
      }
    }
  }

  &__empty {
    z-index: 2;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    @include rsa-col(center,middle);

    h2 {
      @include rsa-font(header, large);
      padding: rsa-whitespace(less) 0;
      white-space: nowrap;
    }
  }

  &__aside,
  &__footer {
    display: none;
  }

  .rsa-investigate-meta {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 1px;
    background-color: rsa-color(black,base,$rsa-nearly-transparent);

    &__header {
      background-color: rsa-color(black,base,$rsa-nearly-transparent);
    }

    .rsa-list-button {
      color: rsa-color(white,base, $rsa-nearly-opaque);
      &:after {
        color: rsa-color(white,base, $rsa-nearly-transparent);
      }
      &:hover {
        color: rsa-color(white,base, $rsa-opaque);
        &:after {
          color: rsa-color(white,base, $rsa-translucent);
        }
      }
    }

    &-key-values__value {

      &:hover {
        .rsa-investigate-meta-key-values__value-label,
        .rsa-investigate-meta-key-values__value-metric {
          color: rsa-color(white);
        }
      }

      &-label {
        color: rsa-color(blue, lighter);
      }

      &-metric {
        color: rsa-color(green, lighter);

        &:before {
          content: '(';
          color: rsa-color(gray);
        }

        &:after {
          content: ')';
          color: rsa-color(gray);
        }
      }
    }
  }

  .rsa-progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 2;
  }

  .rsa-investigate-timeline {
    height: 2.5em;
    &.is-expanded {
      height: 200px;
      .rsa-chart {
        left: 0;
        right: 0;
        .rsa-x-axis,
        .rsa-y-axis,
        .points,
        .grids {
          display: block;
        }
      }
      .rsa-icon {
        right: 0;
      }
      .timestamp {
        opacity: 0;
      }
    }

    .rsa-icon {
      position: absolute;
      right: 170px;
      transition: right 250ms;
    }

    .timestamp {
      @include rsa-font(light);
      position: absolute;
      width: 170px;
      padding: 0.75em 0;
      text-align: center;
      color: rsa-color(grey,light);
      background-color: rsa-color(black,base,$rsa-translucent);
      opacity: 1;
      transition: opacity 250ms;
      &.right {
        right: 0;
      }
      span {
        font-weight: 500;
        color: white;
      }
    }

    .rsa-chart {
      margin: 0;
      left: 170px;
      right: 170px;
      background-color: rsa-color(black,base,$rsa-nearly-transparent);
      .rsa-x-axis,
      .rsa-y-axis,
      .points,
      .grids {
        display: none;
      }
      .domain,
      .tick line {
        stroke: rsa-color(black,base,$rsa-translucent);
      }
      .tick text {
        stroke-width: 0;
      }
    }
  }

  .rsa-investigate-events-table {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;

    &__header {
      background-color: rsa-color(black,base,$rsa-nearly-transparent);
    }

    .rsa-data-table {
      &-header-cell,
      &-body-cell {
        border-right: 1px dashed rsa-color(black,base,$rsa-nearly-transparent);
      }

      &-header,
      &-body-row {
        border-bottom: 1px solid rsa-color(black,base,$rsa-nearly-transparent);
      }
    }
  }

  .recon-container {
    margin-left: 1px; /* let a sliver of background shows thru as a border */
  }

  .recon-meta-content {
    margin-left: 1px; /* let a sliver of background shows thru as a border */
  }
}
