<hbox>
  {{#click-outside action=(action 'collapseManagerList')}}

    <div class='rsa-button-group'>
      {{#rsa-form-button
        class='list-caption'
        defaultAction=(action 'toggleExpandManagerList')
        title=titleTooltip
      }}
        {{caption}}
      {{/rsa-form-button}}
      {{#rsa-form-button
        class='rsa-split-dropdown'
        defaultAction=(action 'toggleExpandManagerList')
      }}
        {{rsa-icon name='arrow-down-12'}}
      {{/rsa-form-button}}
    </div>

    {{#rsa-button-menu isExpanded=isExpanded style=offsetsStyle}}

      {{#if isExpanded}}

        {{#if isListView}}
          <div class='list-body'>
            {{yield (hash
              filter=(component 'list-manager/list-filter'
                listName=listName
                originalList=list
                updateFilteredList=(action 'updateFilteredList')
              )
             )
            }}

            {{yield (hash
              itemList=(component 'list-manager/item-list'
                listName=listName
                list=filteredList
                selectedItem=selectedItem
                itemSelection=(action 'handleItemSelection')
                isExpanded=isExpanded
                editItem=(action 'editItem')
              )
             )
            }}
          </div>

          {{list-manager/list-footer
            itemType=itemType
            createItem=(action 'editItem')
            helpId=helpId
          }}

        {{else}}

          {{yield (hash
            details=(component 'list-manager/item-details'
              itemType=itemType
              detailsDone=(action 'detailsDone')
              item=itemForEdit
              itemSelection=(action 'handleItemSelection')
              helpId=helpId
            )
           )
          }}

        {{/if}}

      {{/if}}

    {{/rsa-button-menu}}
  {{/click-outside}}
</hbox>
