general:
  deployment:
    bins:
      base_path:
        /home/presidio/presidio-core/bin
dags:
  dags_configs:
  - dag_id: full_flow
    args:
      hourly_smart_events_confs:
      - userId_hourly
      data_sources: ${dataPipeline.schemas}
      command: run
    schedule_interval: timedelta(hours=1)
    start_date: ${dataPipeline.startTime}

  tasks_instances:
    hourly_DLPFILE_feature_aggregations:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-score-aggr-*.jar
        main_class: presidio.ade.processes.shell.ScoreAggregationsApplication
        xmx: 500
        xms: 70
  operators:
    default_jar_values:
      retry_args:
        retries: 4
        retry_delay: 5
        retry_exponential_backoff: True
        max_retry_delay: 300
      java_path: /usr/bin/java
      jvm_args:
        xms: 2048
        xmx: 2048
        timezone: -Duser.timezone=UTC
        remote_debug_enabled: False
        remote_debug_suspend: False
        jmx_enabled: False
        extra_jvm:
    SmartEventsOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-smart-*.jar
        main_class: presidio.ade.smart.SmartApplication
        xmx: 1024
        xms: 1024
    FeatureAggregationsOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-feature-aggr-*.jar
        main_class: presidio.ade.processes.shell.FeatureAggregationsApplication
        xmx: 1024
        xms: 1024
    ScoreAggregationsOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-score-aggr-*.jar
        main_class: presidio.ade.processes.shell.ScoreAggregationsApplication
        xmx: 1024
        xms: 1024
        extra_jvm: -XX:+UseG1GC -XX:G1RSetUpdatingPauseTimePercent=5
    RawModelFeatureAggregationBucketsOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-model-feature-buckets-*.jar
        main_class: presidio.ade.processes.shell.feature.aggregation.buckets.ModelFeatureAggregationBucketsApplication
        xmx: 1024
        xms: 1024
    RawModelOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-modeling-*.jar
        main_class: presidio.ade.modeling.ModelingServiceApplication
        xmx: 1024
        xms: 1024
    AggrModelAccumulateAggregationsOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-accumulate-aggr-*.jar
        main_class: presidio.ade.processes.shell.AccumulateAggregationsApplication
        xmx: 1024
        xms: 1024
    AggrModelOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-modeling-*.jar
        main_class: presidio.ade.modeling.ModelingServiceApplication
        xmx: 1024
        xms: 1024
    SmartModelAccumulateOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-accumulate-smart-*.jar
        main_class: presidio.ade.processes.shell.AccumulateSmartApplication
        xmx: 1024
        xms: 1024
    SmartModelOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-modeling-*.jar
        main_class: presidio.ade.modeling.ModelingServiceApplication
        xmx: 1024
        xms: 1024
    AdeManagerOperator:
      jvm_args:
        jar_path: ${general.deployment.bins.base_path}/presidio-ade-app-manager-*.jar
        main_class: presidio.ade.manager.AdeManagerApplication
        xmx: 1024
        xms: 1024
components:
  adapter:
    jvm_args:
      jar_path: ${general.deployment.bins.base_path}/presidio-adapter-*.jar
      main_class: presidio.adapter.FortscaleAdapterApplication
  input:
    jvm_args:
      jar_path: ${general.deployment.bins.base_path}/presidio-input-core-*.jar
      main_class: presidio.input.core.FortscaleInputCoreApplication
      xmx: 2048
      xms: 2048
  output:
    jvm_args:
      jar_path: ${general.deployment.bins.base_path}/presidio-output-processor-*.jar
      main_class: presidio.output.processor.FortscaleOutputProcessorApplication
      xmx: 2048
      xms: 2048
  ade:
    models:
      feature_aggregation_records:
        build_model_interval_in_days: 1
        accumulate_interval_in_days: 1
        min_data_time_range_for_building_models_in_days: 14
      enriched_records:
        build_model_interval_in_days: 1
        feature_aggregation_buckets_interval_in_days: 1
        min_data_time_range_for_building_models_in_days: 14
      smart_records:
        build_model_interval_in_days: 1
        accumulate_interval_in_days: 1
        min_data_time_range_for_building_models_in_days: 14
