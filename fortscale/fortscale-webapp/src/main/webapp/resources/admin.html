<!DOCTYPE html>
<html class="login-bg" ng-app="FortscaleAdmin">
<head>
	<title>Fortscale - Manage Users</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <!-- bootstrap -->
    <link href="components/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <!--<link href="css/bootstrap/bootstrap-responsive.css" rel="stylesheet">-->
    <link href="components/bootstrap/bootstrap-overrides.css" type="text/css" rel="stylesheet" />

    <!-- global styles -->
    <link rel="stylesheet" type="text/css" href="components/detail-wrap/css/layout.css">
    <link rel="stylesheet" type="text/css" href="components/detail-wrap/css/elements.css">
    <link rel="stylesheet" type="text/css" href="components/detail-wrap/css/icons.css">
    <!-- libraries -->
    <link rel="stylesheet" href="styles/font-awesome/css/font-awesome.min.css">
    
    <!-- this page specific styles -->
    <link rel="stylesheet" href="components/detail-wrap/css/signin.css" type="text/css" media="screen" />

    <!-- open sans font -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script src="components/angular/angular.min.js"></script>
    <script src="scripts/services/auth.js"></script>
    <script src="scripts/admin.js"></script>
    <script src="scripts/controllers/admin_controller.js"></script>
</head>
<body ng-controller="AdminController" id="admin">
    <div class="row-fluid login-wrapper">
        <a href="index.html">
            <img class="logo" src="images/login_title.png">
        </a>

        <div class="span8 box">
            <div class="content-wrap">
                <header>
                    <input type="button"
                           class="btn btn-primary"
                           ng-class="{ disabled: newUser }"
                           ng-disabled="newUser"
                           style="float: right"
                           ng-click="addUser()"
                           value="+ Add New User" />
                    <h6>Manage Users</h6>
                </header>
                <div class="alert alert-error" ng-show="error">
                    <i class="icon-remove-sign"></i>
                    {{error}}
                </div>
                <table class="table admin-table">
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-if="newUser">
                            <td><input type="text" placeholder="Email address" ng-model="newUser.username" ng-change="validateNewUser()" /></td>
                            <td><input type="text" placeholder="First name" ng-model="newUser.firstName" ng-change="validateNewUser()" /></td>
                            <td><input type="text" placeholder="Last name" ng-model="newUser.lastName" ng-change="validateNewUser()" /></td>
                            <td><input type="password" placeholder="Password" ng-model="newUser.password" ng-change="validateNewUser()" /></td>
                            <td colspan="2">
                                <input type="button"
                                       class="btn btn-primary"
                                       ng-class="{ disabled: !newUserValidated }"
                                       value="Add User"
                                       ng-click="createUser()"
                                       ng-disabled="!newUserValidated" />
                                <a ng-click="cancelNewUser()" class="btn btn-link">Cancel</a>
                            </td>
                        </tr>
                        <tr ng-repeat="user in users | orderBy:'userName'">
                            <td>{{user.userName}}</td>
                            <td>{{user.firstName}}</td>
                            <td>{{user.lastName}}</td>
                            <td><input type="button" ng-click="renewPassword(user)" value="Renew password" class="btn" /></td>
                            <td><input type="button" ng-click="deleteUser(user)" value="Delete" class="btn btn-danger" /></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

	<!-- scripts -->
    <script src="components/jquery/jquery-2.0.3.min.js"></script>
    <script src="components/bootstrap/js/bootstrap.min.js"></script>
    <script src="components/detail-wrap/scripts/theme.js"></script>

    <!-- pre load bg imgs -->
    <script type="text/javascript">
        $(function () {
            // bg switcher
            var $btns = $(".bg-switch .bg");
            $btns.click(function (e) {
                e.preventDefault();
                $btns.removeClass("active");
                $(this).addClass("active");
                var bg = $(this).data("img");

                $("html").css("background-image", "url('img/bgs/" + bg + "')");
            });

        });
    </script>
</body>
</html>